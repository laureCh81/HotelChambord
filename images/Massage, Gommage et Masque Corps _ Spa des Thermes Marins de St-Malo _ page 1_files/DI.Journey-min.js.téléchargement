null==window.ofsysInterception&&(window.ofsysInterception={}),null==window.ofsysInterception.util&&(window.ofsysInterception.util={}),function(e){"use strict";function t(e,t){var n=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&n===e}function n(e){return isFinite(e)&&e%1==0}function r(e){return JSON.parse(JSON.stringify(e))}function i(e,t){if(t.bind)return t.bind(e);var n=[],r=function(){},i=function(){return t.apply(e,n.concat(Array.prototype.slice.call(arguments)))};return r.prototype=t.prototype,i.prototype=new r,i}e.getObjType=function(e){return Object.prototype.toString.call(e).slice(8,-1)},e.is=t,e.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},e.isInt=n,e.convertToArray=function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t},e.clone=r,e.methodRef=i,e.isIE8OrOlder=function(){return null!=window.attachEvent&&null==window.addEventListener},e.isIE9OrOlder=function(){return e.isIE8OrOlder()||null!=document.documentMode&&(null==window.performance||document.documentMode<10)},e.parseInt=function(e){if(null==e||""===e||!isFinite(e)||e%1!=0)throw new Error("Not an int : '"+e+"'");return parseInt(e,"10")},e.getURLParameters=function(){var e=window.location.search.slice(1),t={};if(null==e||""==e)return t;for(var n=decodeURIComponent(e).split("&"),r=0;r<n.length;r++){var i=n[r].split("=");t[i[0]]=i[1]}return t},e.coalesce=function(){for(var e=0;e<arguments.length;e++)if(null!=arguments[e])return arguments[e];return null},e.prefixZeros=function(e,t){var n=t-e.toString().length;return n<=0?e:new Array(n+1).join("0")+e.toString()},e.formatNumber=function(e,t,r){var i;n(e)||(i=null!=t?Math.pow(10,t):100,e=Math.round(e*i)/i);for(var o=new RegExp("^(-?[0-9]+)([0-9]{3})"),l=e+"";o.test(l);)l=l.replace(o,"$1 $2");if(r){-1==l.indexOf(".")&&(l+=".");for(var s=l.afterLast(".").length;s<t;s++)l+="0"}return l},e.formatFloatNumber=function(e,t){var n;null==t&&(t=2),n=null!=t?Math.pow(10,t):100,e=Math.round(e*n)/n;for(var r=new RegExp("(-?[0-9]+)([0-9]{3})"),i=e+"";r.test(i);)i=i.replace(r,"$1 $2");-1==i.indexOf(".")&&(i+=".0");var o=i.afterLast(".");if(o.length<t)for(var l=0;l<t-o.length;l++)i+="0";return i},e.assert=function(e,t){if(!e)throw null==t?new Error("assertion failure"):new Error(t)},e.net={},e.net.ajax=function(e){var n=new XMLHttpRequest;n.onreadystatechange=function(){4==n.readyState&&(200==n.status?e.success&&e.success(n.responseText,n):e.error&&e.error(n.status,n.responseText,n))};var r=e.method||"POST";n.open(r,e.url,!0),null!=e.timeout&&(n.timeout=e.timeout);var i=null;if(null!=e.data)if(i="",t("String",e.data))n.setRequestHeader("Content-type","text/plain"),i=e.data;else{if(!t("Object",e.data))throw new Error("data type");for(var o in"POST"==r&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.data)i.length>0&&(i+="&"),i+=encodeURIComponent(o)+"="+encodeURIComponent(e.data[o])}n.send(i)},e.net.corsAjax=function(e){try{var t=new XMLHttpRequest,n="withCredentials"in t;if(null!=window.XDomainRequest&&!n){var r=new XDomainRequest;r.open("POST",e.url),r.ontimeout=function(){e.error(408,"timeout")},r.onerror=function(){e.error(500,"error")},r.onload=function(){e.success(r.responseText)},setTimeout(function(){r.send(e.data)},0)}else t.open("POST",e.url,!0),t.setRequestHeader("Content-type","text/plain"),t.onreadystatechange=function(){4==t.readyState&&(200==t.status?e.success(t.responseText):e.error(t.status,t.responseText))},t.send(e.data)}catch(t){e.error(500,"exception "+t),window.console&&console.error(t)}};var o=e.string={};o.trim=function(e){return e.replace(/^\s+|\s+$/g,"")},o.formatTemplate=function(e,t){return e.replace(/([{]\w+[}])/g,function(e,n,r,i){return null!=t[e]?t[e]:e})};var l=e.datetime={};l.buildDateWithStrictValidation=function(e,t,n,r,i,o){var l=new Date(e,t,n,r,i,o,0);return l.getFullYear()!=e||l.getMonth()!=t||l.getDate()!=n||l.getHours()!=r||l.getMinutes()!=i||l.getSeconds()!=o?null:l},l.parseOFSYSDateTime=function(t){var n=/^(\d+)[.-](\d+)[.-](\d+) (\d+):(\d+):(\d+)$/gm.exec(t),r=null;if(null!=n&&7==n.length){var i=e.parseInt(n[1]),o=e.parseInt(n[2])-1,l=e.parseInt(n[3]),s=e.parseInt(n[4]),a=e.parseInt(n[5]),u=e.parseInt(n[6]);r=e.datetime.buildDateWithStrictValidation(i,o,l,s,a,u)}else{if(null!=(n=/^(\d+)[.-](\d+)[.-](\d+) (\d+):(\d+)$/gm.exec(t))&&6==n.length){i=e.parseInt(n[1]),o=e.parseInt(n[2])-1,l=e.parseInt(n[3]),s=e.parseInt(n[4]),a=e.parseInt(n[5]);r=e.datetime.buildDateWithStrictValidation(i,o,l,s,a,0)}else{if(null!=(n=/^(\d+)[.-](\d+)[.-](\d+)$/gm.exec(t))&&4==n.length){i=e.parseInt(n[1]),o=e.parseInt(n[2])-1,l=e.parseInt(n[3]);r=e.datetime.buildDateWithStrictValidation(i,o,l,0,0,0)}}}return r},l.parseOFSYSTime=function(t){if(null!=(o=/^(\d+):(\d+):(\d+)$/gm.exec(t))&&4==o.length){var n=e.parseInt(o[1]),r=e.parseInt(o[2]),i=e.parseInt(o[3]);return null!=e.datetime.buildDateWithStrictValidation(2001,1,1,n,r,i)?{HH:n,mm:r,ss:i}:null}var o;if(null!=(o=/^(\d+):(\d+)$/gm.exec(t))&&3==o.length){n=e.parseInt(o[1]),r=e.parseInt(o[2]);return null!=e.datetime.buildDateWithStrictValidation(2001,1,1,n,r,0)?{HH:n,mm:r,ss:0}:null}return null};var s={DeclareClassWithVariables:function(e){var t=s.DeclareClass(!0,e.methods,e.name,e.variables);if(null!=e.static)for(var n in t.__STATIC__=e.static,e.static)t[n]=e.static[n];return t},DeclareClass:function(e,n,i,o){var l=function(){if(this.ClassName=i,null!=o){for(var n in o)this[n]=null!=o[n]&&(t("Object",o[n])||t("Array",o[n]))?r(o[n]):o[n];e&&null!=Object.seal&&Object.seal(this),null!=this.init&&this.init.apply(this,arguments)}};for(var a in l.prototype=n,s.AddCommonClassMethods(l),l.Variables=o,l.ClassName=i,n){var u=n[a];null!=u&&(l[a]=u)}return l},AddCommonClassMethods:function(e){e.prototype.CallMethod=function(e){return i(this,e)},e.Extend=function(t){var n=s.ExtendClass(!0,this,t.methods,t.name,t.variables);if(null!=e.__STATIC__)for(var r in e.__STATIC__)n[r]=e.__STATIC__[r];if(null!=t.static)for(var r in t.static)n[r]=t.static[r];return n}},ExtendClass:function(e,n,i,o,l){if(null!=Object.create){var a={};for(var u in i){if(null!=(g=i[u]))a[u]={value:i[u],enumerable:!0,configurable:!0,writable:!0};else{var c=Object.getOwnPropertyDescriptor(i,u).get,h=Object.getOwnPropertyDescriptor(i,u).set;null!=c&&null!=h?a[u]={configurable:!1,get:c,set:h}:null!=c?a[u]={configurable:!1,get:c}:null!=h&&(a[u]={configurable:!1,set:h})}}if(null!=n.Variables){var d={};for(var u in n.Variables)d[u]=n.Variables[u];if(null!=l)for(var u in l)d[u]=l[u];l=d}(p=function(){if(this.ClassName=o,null!=l){for(var n in l)this[n]=null!=l[n]&&(t("Object",l[n])||t("Array",l[n]))?r(l[n]):l[n];e&&null!=Object.seal&&Object.seal(this),null!=this.init&&this.init.apply(this,arguments)}}).prototype=Object.create(n.prototype,a),p.BasePrototype=n.prototype,p.BaseClass=n,p.Variables=l,p.ClassName=o}else{var p=function(){if(this.ClassName=o,null!=l){for(var n in l)this[n]=null!=l[n]&&(t("Object",l[n])||t("Array",l[n]))?r(l[n]):l[n];e&&null!=Object.seal&&Object.seal(this),null!=this.init&&this.init.apply(this,arguments)}},f={};for(var u in n.prototype)f[u]=n.prototype[u];for(var u in i)f[u]=i[u];p.prototype=f,p.BasePrototype=n.prototype,p.BaseClass=n,p.ClassName=o}for(var m in s.AddCommonClassMethods(p),a){var g;null!=(g=a[m]).value&&(g=g.value),p[m]=g}return p}};e.classes=s}(window.ofsysInterception.util),null==window.ofsysInterception&&(window.ofsysInterception={}),null==window.ofsysInterception.dom&&(window.ofsysInterception.dom={}),function(e){"use strict";var t=window.ofsysInterception;t.util;function n(e){this.elem=e}function r(e){this.elems=e}e.Elem=n,n.prototype={findAll:function(t){return e._selectAll(t,this.elem)},find1:function(t){return e._select1(t,this.elem)},nextOrNull:function(){var t;if(this.elem.nextElementSibling)t=this.elem.nextElementSibling;else for(t=this.elem.nextSibling;null!=t&&1!==t.nodeType;)t=t.nextSibling;return null==t?null:new e.Elem(t)},next:function(){var e=this.nextOrNull();if(null==e)throw new Error("There is no next element");return e},prevOrNull:function(){var t=null;if(this.elem.previousElementSibling)t=this.elem.previousElementSibling;else for(t=this.elem.previousSibling;null!=t&&1!==t.nodeType;)t=t.previousSibling;return null==t?null:new e.Elem(t)},prev:function(){var e=this.prevOrNull();if(null==e)throw new Error("There is no previous element");return e},children:function(){for(var t=this.elem.children,n=[],r=0;r<t.length;r++)1==t[r].nodeType&&n.push(t[r]);return new e.OfsysDomElemArray(n)},parent:function(){return new e.Elem(this.elem.parentNode)},firstParentMatching:function(t){for(var n=this.elem.parentNode;null!=n;){if(e.wrap(n).is(t))return e.wrap(n);n=n.parentNode}return null},addClass:function(e){return this.hasClass(e)||(this.elem.className+=" "+e),this},removeClass:function(e){for(var t=this.elem.className.split(" "),n=[],r=0;r<t.length;r++)t[r]!=e&&n.push(t[r]);return this.elem.className=n.join(" "),this},classes:function(){return this.elem.className.split(" ")},hasClass:function(e){for(var t=this.elem.className.split(" "),n=0;n<t.length;n++)if(t[n]==e)return!0;return!1},getAttr:function(e){return this.elem.getAttribute(e)},setAttr:function(e,t){return this.elem.setAttribute(e,t),this},removeAttr:function(e){return this.elem.removeAttribute(e),this},getStyle:function(t){var n=this._getComputedStyle(t);return null!=n&&""!=n||(n=this.elem.style.getPropertyValue?this.elem.style.getPropertyValue(t):this.elem.style[e.util.cssToCamelCase(t)]),""===n?null:n},_getComputedStyle:function(t){if(window.getComputedStyle)return window.getComputedStyle(this.elem,null).getPropertyValue(t);if(this.elem.currentStyle)return this.elem.currentStyle[e.util.cssToCamelCase(t)];throw new Error("Unsupported")},getOwnStyle:function(t){var n;return""===(n=this.elem.style.getPropertyValue?this.elem.style.getPropertyValue(t):this.elem.style[e.util.cssToCamelCase(t)])?null:n},setStyle:function(t,n){return this.elem.style.setProperty?this.elem.style.setProperty(t,n):this.elem.style[e.util.cssToCamelCase(t)]=n,this},setStyles:function(e){for(var t in e)this.setStyle(t,e[t]);return this},removeStyle:function(t){if(this.elem.style.removeProperty)this.elem.style.removeProperty(t);else{if(!this.elem.style.removeAttribute)throw new Error("Unsupported");this.elem.style.removeAttribute(e.util.cssToCamelCase(t))}return this},isChecked:function(){return this.elem.checked},setChecked:function(e){return this.elem.checked=e,this},getSelectedOption:function(){for(var e=this.getValue(),t=this.findAll("option"),n=0;n<t.length();n++)if(t.get(n).getValue()==e)return t.get(n);return null},getValue:function(){return this.elem.value},setValue:function(e){return this.elem.value=e,this},append:function(e){return this.elem.appendChild(e.elem),this},prepend:function(e){return this.elem.insertBefore(e.elem,this.elem.firstChild),this},appendTo:function(e){return e.elem.appendChild(this.elem),this},insertAfter:function(e){return e.elem.parentNode.insertBefore(this.elem,e.elem.nextSibling),this},insertBefore:function(e){return e.elem.parentNode.insertBefore(this.elem,e.elem),this},remove:function(){this.elem.parentNode.removeChild(this.elem);this.elem=null},detach:function(){return this.elem=this.elem.parentNode.removeChild(this.elem),this},empty:function(){return this.elem.innerHTML="",this},getText:function(){if("textContent"in this.elem)return this.elem.textContent;if("innerText"in this.elem)return this.elem.innerText;throw new Error("Unsupported")},setText:function(e){if("textContent"in this.elem)this.elem.textContent=e;else{if(!("innerText"in this.elem))throw new Error("Unsupported");this.elem.innerText=e}return this},getInnerHTML:function(){return this.elem.innerHTML},setInnerHTML:function(e){return this.elem.innerHTML=e,this},getOuterHTML:function(){return this.elem.outerHTML},setOuterHTML:function(e){return this.elem.outerHTML=e,this},appendText:function(e){return this.elem.appendChild(document.createTextNode(e)),this},appendHTML:function(e){var t=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=e;n.firstChild;)t.appendChild(n.firstChild);return this.elem.appendChild(t),this},clone:function(){return e.parse(this.elem.outerHTML)},on:function(t,n,r){return e.on(this.elem,t,n,r)},removeEvent:function(e){if(this.elem.removeEventListener)this.elem.removeEventListener(e.eventType,e.fn,!1);else{if(!this.elem.detachEvent)throw new Error("Unsupported");this.elem.detachEvent("on"+e.eventType,e.fn)}return this},trigger:function(e){if(document.createEvent){(t=document.createEvent("HTMLEvents")).initEvent(e,!0,!0),t.eventName=e,this.elem.dispatchEvent(t)}else{if(!document.createEventObject)throw new Error("Unsupported");var t=document.createEventObject();this.elem.fireEvent("on"+e,t)}},getScroll:function(){return{left:this.elem.scrollLeft,top:this.elem.scrollTop}},setScrollLeft:function(e){return this.elem.scrollLeft=e,this},setScrollTop:function(e){return this.elem.scrollTop=e,this},getBounds:function(){var t=this.elem.getBoundingClientRect(),n=e.browserWindow.getScrollLeft(),r=e.browserWindow.getScrollTop();return{left:t.left+n,top:t.top+r,right:t.right+n,bottom:t.bottom+r,width:t.right==t.left?0:t.right-t.left+1,height:t.top==t.bottom?0:t.bottom-t.top+1}},getWidth:function(){return this.elem.offsetWidth},getHeight:function(){return this.elem.offsetHeight},getCoord:function(){var t=this.elem.getBoundingClientRect(),n=e.browserWindow.getScrollLeft(),r=e.browserWindow.getScrollTop();return{left:t.left+n,top:t.top+r}},getOffsetParent:function(){return new e.Elem(this.elem.offsetParent)},getRelativeOffset:function(){return{left:this.elem.offsetLeft,top:this.elem.offsetTop}},is:function(e){if(this.elem.mozMatchesSelector)return this.elem.mozMatchesSelector(e);if(this.elem.webkitMatchesSelector)return this.elem.webkitMatchesSelector(e);if(this.elem.msMatchesSelector)return this.elem.msMatchesSelector(e);for(var t=this.elem.parentNode.querySelectorAll(e),n=0;n<t.length;n++)if(t[n]===this.elem)return!0;return!1},focus:function(){this.elem.focus()},setShown:function(e){e?this.show():this.hide()},hide:function(){return this.setAttr("domTools_previous_display",this.getStyle("display")),this.setStyle("display","none"),this},show:function(){var e=this.getAttr("domTools_previous_display");return null!=e&&""!=e&&"none"!=e?this.setStyle("display",e):this.removeStyle("display"),this},toggle:function(){return"none"==this.getStyle("display")?this.show():this.hide(),this},animate:function(t){null==t&&(t={});var n=t.properties,r=t.durationMilli;null==r&&(r=400);var i=t.interpolation;null==i&&(i="swing");var o=t.onCompleteCallback,l=t.onStepCallback,s=t.extensionProperties,a={};if(this.elem==window)a.scrollTop={get:function(){return e.browserWindow.getScrollTop()},set:function(t,n){e.browserWindow.setScrollTop(t)}},a.scrollLeft={get:function(){return e.browserWindow.getScrollLeft()},set:function(t,n){e.browserWindow.setScrollLeft(t)}};else{var u=this;a.scrollTop={get:function(){return u.getScrollTop()},set:function(e){u.setScrollTop(e)}},a.scrollLeft={get:function(){return u.getScrollLeft()},set:function(e){u.setScrollLeft(e)}}}if(null!=s)for(var c in s)a[c]=s[c];var h=[],d=/^(-?\d+(?:\.\d+)?)([a-zA-Z]*|%)$/g;for(var p in n){var f=null;if(null!=a[p]?f=a[p].get():null!=(f=this.getOwnStyle(p))&&""!=f||(f=this._getComputedStyle(p)),null===f||""===f)throw new Error("No CSS val :"+p);if(f.indexOf&&(0==f.indexOf("#")||0==f.indexOf("rgb(")||0==f.indexOf("rgba("))){var m=e.util.parseColor(f),g=e.util.parseColor(n[p]);if(null!=m&&null!=g){h.push({css:p,init:m,delta:[g[0]-m[0],g[1]-m[1],g[2]-m[2],g[3]-m[3]],unit:e.util.supportsRGBA()?"rgba":"rgb"});continue}}d.lastIndex=0;var w=d.exec(f);if(null==w)throw new Error("Bad CSS val "+p+" : "+f);var v=parseFloat(w[1]);if(isNaN(v))throw new Error("Bad CSS val "+p+" : "+f);var y=w[2],S=n[p];if("string"==typeof n[p]){if(d.lastIndex=0,null==(w=d.exec(n[p])))throw new Error("Bad CSS val "+p+" : "+n[p]);if(S=parseFloat(w[1]),isNaN(S))throw new Error("Invalid target CSS "+p+" : "+n[p]);if(y!=w[2])throw new Error("Cannot animate CSS "+p+" from "+y+" to "+w[2])}h.push({css:p,init:v,delta:S-v,unit:y})}var b,C=e.util.getTimeStampForAnimation();if("linear"==i)b=0;else{if("swing"!=i)throw new Error("Invalid interpolation "+i);b=1}u=this;var E=function(){var t=(e.util.getTimeStampForAnimation()-C)/r;t>1&&(t=1),1==b&&(t=Math.sin((t-.5)*Math.PI)/2+.5);for(var n=0;n<h.length;n++){var i=h[n];if("rgba"==i.unit)var s="rgba("+(i.init[0]+i.delta[0]*t|0)+","+(i.init[1]+i.delta[1]*t|0)+","+(i.init[2]+i.delta[2]*t|0)+","+(i.init[3]+i.delta[3]*t)+")";else if("rgb"==i.unit)s="rgb("+(i.init[0]+i.delta[0]*t|0)+","+(i.init[1]+i.delta[1]*t|0)+","+(i.init[2]+i.delta[2]*t|0)+")";else s=i.init+i.delta*t+i.unit;null!=a[i.css]?a[i.css].set(s,u):u.setStyle(i.css,s)}t<1?(window.requestAnimationFrame?window.requestAnimationFrame(E):setTimeout(E,1),null!=l&&l()):null!=o&&o()};window.requestAnimationFrame?window.requestAnimationFrame(E):setTimeout(E,1)},fadeIn:function(e,t,n){null==e&&(e=500);var r=this;return this.setStyle("opacity","0.0"),"none"==this.getStyle("display")&&this.removeStyle("display"),this.animate({properties:{opacity:1},durationMilli:e,interpolation:t,onCompleteCallback:function(){r.removeStyle("opacity"),n&&n()}}),this},fadeOut:function(e,t,n){null==e&&(e=500);var r=this;return this.setStyle("opacity","1.0"),this.animate({properties:{opacity:0},durationMilli:e,interpolation:t,onCompleteCallback:function(){r.setStyle("display","none").removeStyle("opacity"),n&&n()}}),this},fadeToggle:function(){return"none"!=this.getStyle("display")?this.fadeOut():this.fadeIn(),this},slideDown:function(e,t){null==e&&(e=500);var n=this.getStyle("height");"auto"==n&&(this.setStyle("visibility","hidden"),"none"==this.getStyle("display")&&this.removeStyle("display"),n=this.getHeight()-parseInt(this.getStyle("padding-top"))-parseInt(this.getStyle("padding-bottom"))-parseInt(this.getStyle("border-top-width"))-parseInt(this.getStyle("border-bottom-width"))),this.setStyle("height","0px").setStyle("visibility","visible");var r=parseInt(n);this.elem.style.height="0px",this.setStyle("overflow","hidden"),"none"==this.getStyle("display")&&this.removeStyle("display");var i=this.getStyle("padding-top"),o=this.getStyle("padding-bottom");return this.setStyle("padding-top","0px").setStyle("padding-bottom","0px"),this.animate({properties:{height:r,"padding-top":i,"padding-bottom":o},durationMilli:e,interpolation:t}),this},slideUp:function(e,t){null==e&&(e=500);var n=this.getStyle("padding-top"),r=this.getStyle("padding-bottom"),i=this.elem.offsetHeight-parseInt(n)-parseInt(r)-parseInt(this.getStyle("border-top-width"))-parseInt(this.getStyle("border-bottom-width"));this.elem.style.height=i+"px",this.elem.style.overflow="hidden";var o=this;return this.animate({properties:{height:0,"padding-top":0,"padding-bottom":0},durationMilli:e,interpolation:t,onCompleteCallback:function(){o.elem.style.display="none",o.setStyle("padding-top",n).setStyle("padding-bottom",r).setStyle("height",i+"px")}}),this},slideToggle:function(){return"none"!=this.getStyle("display")?this.slideUp():this.slideDown(),this},scaleUp:function(e,t,n){null==e&&(e=500),null==t&&(t=0),null==n&&(n=1);var r=this;return this.setStyle("transform","scale("+t+")").show(),this.animate({properties:{transform_scale:n},durationMilli:e,onCompleteCallback:function(){r.removeStyle("transform")},extensionProperties:{transform_scale:{get:function(){return t},set:function(e,t){t.setStyle("transform","scale("+e+")")}}}}),this},scaleDown:function(e,t,n){null==e&&(e=500),null==t&&(t=1),null==n&&(n=0);var r=this;return this.setStyle("transform","scale("+t+")"),this.animate({properties:{transform_scale:n},durationMilli:e,onCompleteCallback:function(){r.removeStyle("transform"),r.hide()},extensionProperties:{transform_scale:{get:function(){return t},set:function(e,t){t.setStyle("transform","scale("+e+")")}}}}),this}},e.OfsysDomElemArray=r,r.prototype={get:function(t){if(null==this.elems[t])throw new Error("No element at index : "+t);return new e.Elem(this.elems[t])},first:function(){if(0==this.elems.length)throw new Error("Empty");return new e.Elem(this.elems[0])},last:function(){if(0==this.elems.length)throw new Error("Empty");return new e.Elem(this.elems[this.elems.length-1])},length:function(){return this.elems.length},addClass:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).addClass(t);return this},removeClass:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).removeClass(t);return this},setAttr:function(t,n){for(var r=0;r<this.elems.length;r++)e.wrap(this.elems[r]).setAttr(t,n);return this},removeAttr:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).removeAttr(t);return this},setStyle:function(t,n){for(var r=0;r<this.elems.length;r++)e.wrap(this.elems[r]).setStyle(t,n);return this},removeStyle:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).removeStyle(t);return this},setProp:function(t,n){for(var r=0;r<this.elems.length;r++)e.wrap(this.elems[r]).setProp(t,n);return this},setVal:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setVal(t);return this},remove:function(){for(var t=0;t<this.elems.length;t++)e.wrap(this.elems[t]).remove();return this},empty:function(){for(var t=0;t<this.elems.length;t++)e.wrap(this.elems[t]).empty();return this},setText:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setText(t);return this},setInnerHTML:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setInnerHTML(t);return this},setOuterHTML:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setOuterHTML(t);return this},appendText:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).appendText(t);return this},appendHTML:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).appendHTML(t);return this},on:function(t,n,r){for(var i=0;i<this.elems.length;i++)e.wrap(this.elems[i]).on(t,n,r);return this},trigger:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).trigger(t);return this},setScrollLeft:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setScrollLeft(t);return this},setScrollTop:function(t){for(var n=0;n<this.elems.length;n++)e.wrap(this.elems[n]).setScrollTop(t);return this},hide:function(){for(var t=0;t<this.elems.length;t++)e.wrap(this.elems[t]).hide();return this},show:function(){for(var t=0;t<this.elems.length;t++)e.wrap(this.elems[t]).show();return this},toggle:function(){for(var t=0;t<this.elems.length;t++)e.wrap(this.elems[t]).toggle();return this}},e.util={},e.util.cssToCamelCase=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},e.util.supportsRGBA=function(){var t=e.create("script");try{t.elem.style.color="rgba(0, 0, 0, 0.5)"}catch(e){return!1}return!0},e.util.supportsTransform=function(){return"transform"in e.create("div").elem.style},e.util.getTimeStampForAnimation=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():(new Date).getTime()},e.util.parseColor=function(e,n){var r=(e=t.util.string.trim(e).toLowerCase()).match(/^#([0-9a-f]{3})$/i);if(r)return r=r[1],[17*parseInt(r.charAt(0),16),17*parseInt(r.charAt(1),16),17*parseInt(r.charAt(2),16),1];var i=e.match(/^#([0-9a-f]{6})$/i);if(i)return i=i[1],[parseInt(i.substr(0,2),16),parseInt(i.substr(2,2),16),parseInt(i.substr(4,2),16),1];var o=e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+.*\d*)\s*\)$/i)||e.match(/^rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);if(o)return[parseInt(o[1]),parseInt(o[2]),parseInt(o[3]),void 0===o[4]?1:parseFloat(o[4])];var l=e.match(/^rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i);return l?[parseInt(l[1]),parseInt(l[2]),parseInt(l[3]),1]:n},e.util.cancelEvent=function(e){e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),t.util.isIE8OrOlder()&&(e.cancelBubble=!0,e.returnValue=!1)},e.util._onInputEventCompatibility=function(e,t){"onpropertychange"in e.elem&&(e.elem.onpropertychange=t),e.on("keyup",{input:e},t)},e.util.makeUnselectable=function(n){if(t.util.isIE9OrOlder()){if(null==n.tagName)return;var r=n.tagName.toLowerCase();if("input"!=r&&"select"!=r&&"textarea"!=r){1==n.nodeType&&n.setAttribute("unselectable","on");for(var i=n.firstChild;i;)e.util.makeUnselectable(i),i=i.nextSibling}}},e.util.selectNothing=function(){if(window.getSelection)window.getSelection().empty?window.getSelection().empty():window.getSelection().removeAllRanges&&window.getSelection().removeAllRanges();else if(document.selection)try{document.selection.empty()}catch(e){}},e.id=function(t){return e._selectByID(t,document)},e.body=function(){return e.wrap(document.body)},e.select1=function(t){return e._select1(t,document)},e.selectAll=function(t){return e._selectAll(t,document)},e.selectAllByClass=function(t){return e._selectAllByClass(t,document)},e.create=function(t,n){var r=document.createElement(t),i=new e.Elem(r);if(null!=n){for(var o in n)("style"!=o||"style"==o&&null!=o.toUpperCase)&&r.setAttribute(o,n[o]);if(null!=n.style&&null==n.style.toUpperCase){var l=n.style;for(var o in l)i.setStyle(o,l[o])}}return i},e.nsCreate=function(t,n,r){if(null==document.createElementNS)throw new Error("Namespaces not supported by browser");var i=document.createElementNS(t,n),o=new e.Elem(i);if(null!=r){for(var l in r)("style"!=l||"style"==l&&null!=l.toUpperCase)&&i.setAttribute(l,r[l]);if(null!=r.style&&null==r.style.toUpperCase){var s=r.style;for(var l in s)o.setStyle(l,s[l])}}return o},e.parse=function(t){var n=document.createElement("div");if(n.innerHTML=t,n.childNodes.length>1)throw new Error("Multiple nodes in html fragment");return new e.Elem(n.firstChild)},e.wrap=function(t){return new e.Elem(t)};var i=!1;if(e.onLoad=function(e){if(i)e();else if(window.addEventListener)window.addEventListener("load",e,!1);else{if(!window.attachEvent)throw new Error("Not supported");window.attachEvent("onload",e)}},window.addEventListener)window.addEventListener("load",function(){i=!0},!1);else{if(!window.attachEvent)throw new Error("Unsupported");window.attachEvent("onload",function(){i=!0})}e.onReady=function(e){if("complete"==document.readyState||"interactive"==document.readyState)e();else if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else{if(!document.attachEvent)throw new Error("Not supported");document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&e()})}},e.on=function(n,r,i,o){var l,s,a;if(null==o?a=l=i:(s=i,l=o,a=function(e){l(e,s)}),"input"==r&&(!("oninput"in n)||t.util.isIE9OrOlder()))return e.util._onInputEventCompatibility(e.wrap(n),a);if(null==o)if(n.addEventListener)n.addEventListener(r,l,!1);else{if(!n.attachEvent)throw new Error("Unsupported");n.attachEvent("on"+r,l)}else if(n.addEventListener)n.addEventListener(r,a,!1);else{if(!n.attachEvent)throw new Error("Unsupported");n.attachEvent("on"+r,a)}return{eventType:r,fn:a}},e._selectAll=function(n,r){var i=r.querySelectorAll(n);return new e.OfsysDomElemArray(t.util.convertToArray(i,0))},e._selectAllByClass=function(n,r){var i;if(r.getElementsByClassName)i=r.getElementsByClassName(n);else{if(!r.querySelectorAll)throw new Error("Unsupported");i=r.querySelectorAll("."+n)}return new e.OfsysDomElemArray(t.util.convertToArray(i,0))},e._select1=function(t,n){var r=n.querySelectorAll(t);if(1==r.length)return new e.Elem(r[0]);throw 0==r.length?new Error("Element(s) not found : "+t):new Error("Too many element(s) found for "+t+" : "+r.length)},e._selectByID=function(t,n){if("getElementById"in n){if(null==(r=n.getElementById(t)))throw new Error("Element not found : "+t);return new e.Elem(r)}var r;if(null==(r=n.querySelector("#"+t)))throw new Error("Element not found : "+t);return new e.Elem(r)},e.svg={create:function(t,n){return e.nsCreate("http://www.w3.org/2000/svg",t,n)}},e.browserWindow={getSize:function(){var e=1080,t=800;return window.innerHeight?(e=window.innerWidth,t=window.innerHeight):window.document.documentElement.clientHeight?(e=window.document.documentElement.clientWidth,t=window.document.documentElement.clientHeight):window.document.body.clientHeight&&(e=window.document.body.clientWidth,t=window.document.body.clientHeight),{width:e,height:t}},getScrollTop:function(){return void 0!==window.pageYOffset?window.pageYOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollTop:document.body.scrollTop},setScrollTop:function(t){window.scrollTo(e.browserWindow.getScrollLeft(),t)},getScrollLeft:function(){return void 0!==window.pageXOffset?window.pageXOffset:"CSS1Compat"===(document.compatMode||"")?document.documentElement.scrollLeft:document.body.scrollLeft},setScrollLeft:function(t){window.scrollTo(t,e.browserWindow.getScrollTop())},getScrollWidth:function(){return document.body.scrollWidth},getScrollHeight:function(){return document.body.scrollHeight}}}(window.ofsysInterception.dom),null==window.ofsysInterception&&(window.ofsysInterception={}),null==window.ofsysInterception.lightbox&&(window.ofsysInterception.lightbox={}),function(e){"use strict";var t=window.ofsysInterception,n=t.dom,r=t.util,i=r.classes.DeclareClassWithVariables,o={};e.ShowDivInLightbox=function(e,t){null!=o[e]?o[e].Show():(o[e]=new l(t),o[e].GetContent().append(n.id(e).detach().show()),o[e].Show())},e.HideLightbox=function(e,t){null!=o[e]&&(o[e].Hide(),t&&t.hideCallback&&t.hideCallback.call(o[e]))},n.on(window,"resize",function(e){var t=n.browserWindow.getSize();for(var r in o)o[r].OnWindowResized(t)});var l=i({variables:{m_Background:null,m_LightboxDiv:null,m_ContentDiv:null,m_CloseButton:null},methods:{init:function(e){null==e&&(e={});var t=r.isIE8OrOlder(),i=e.WrappingClass?" "+e.WrappingClass:"";this.m_Background=n.create("div",{class:"DialogInsightLightBoxBackground"+(t?" DialogInsightLightBoxBackground_OldIE":"")+i,style:{display:"none"}}),this.m_LightboxDiv=n.create("div",{class:"DialogInsightLightBox",style:{"max-width":(e.width||600)+"px"}}),this.m_ContentDiv=n.create("div"),this.m_CloseButton=n.create("div",{class:"DialogInsightLightBoxCloseButton"});var o=n.browserWindow.getSize().height;this.m_ContentDiv.setStyles({overflow:"auto","max-height":o-100+"px"}),n.body().append(this.m_Background.append(this.m_LightboxDiv.append(this.m_ContentDiv).append(this.m_CloseButton)));var l=this;this.m_CloseButton.on("click",function(t){l.Hide(),e.hideCallback&&e.hideCallback.call(l)})},Show:function(){var e=n.browserWindow.getSize().height;this.m_ContentDiv.setStyles({overflow:"auto","max-height":e-100+"px"});var t=n.util.supportsRGBA(),r=n.util.supportsTransform(),i=t&&r;i&&(this.m_LightboxDiv.hide().setStyle("opacity","0"),this.m_Background.setStyle("background-color","rgba(0,0,0,0.01)")),this.m_Background.show(),i&&(this.m_Background.animate({properties:{"background-color":"rgba(0,0,0,0.5)"},durationMilli:500}),this.m_LightboxDiv.setStyle("transform","scale(0)").show().scaleUp(500,.5,1).fadeIn(500))},Hide:function(){var e=n.util.supportsRGBA(),t=n.util.supportsTransform(),r=this;e&&t?(this.m_LightboxDiv.scaleDown(500,1,.5).fadeOut(500),this.m_Background.animate({properties:{"background-color":"rgba(0,0,0,0.01)"},durationMilli:500,onCompleteCallback:function(){r.m_Background.hide().removeStyle("background-color")}})):this.m_Background.hide()},GetContent:function(){return this.m_ContentDiv},OnWindowResized:function(e){this.m_ContentDiv.setStyles({overflow:"auto","max-height":e.height-100+"px"})}}});e.LightboxPopup=l}(window.ofsysInterception.lightbox),function(){var e=document.createElement("style"),t="/* ======== lightbox styles ======== */div.DialogInsightLightBoxBackground.Interceptor {\tposition: fixed;\tleft: 0px;\ttop: 0px;\twidth: 100%;\theight: 100%;\tz-index: 6000000;\tbackground-color: rgba(0, 0, 0, 0.5);}div.DialogInsightLightBoxBackground.Interceptor.DialogInsightLightBoxBackground_OldIE {\tbackground-image: url(https://cdn.dialoginsight.com/DI/Forms/resources/PopupBgBlockerOlderIE.png);}div.Interceptor div.DialogInsightLightBox {\tpadding: 15px 0px 15px 15px;\tborder-radius: 3px;\tbox-shadow: 0px 0px 10px #555555;\tbackground-color: white;\ttop: 50px;\tleft: 0px;\tz-index: 6000001;\tline-height: normal;\tmargin: 0 auto;\tposition: relative;}div.Interceptor div.DialogInsightLightBoxCloseButton {\tposition: absolute;\tright: -18px;\ttop: -18px;\twidth: 35px;\theight: 35px;\tbackground-image: url(https://cdn.dialoginsight.com/DI/Forms/resources/LightboxClose.png);\tcursor: pointer;}";null!=document.head?document.head.appendChild(e):document.body.appendChild(e),ofsysInterception.util.isIE8OrOlder()?e.styleSheet.cssText=t:e.innerHTML=t}();var OFSYS_Tracker2=new Object({Version:function(){return"1.00"},Data:{},InterceptionConfigs:null,ExtraStorageDataConfig:null,CurrentInterceptor:null,DebugMode:!1,TimerUpdate:null,TimerStepSecond:2,AlreadyDisplayError:!1,IsDummy:!1,CheckConsent:!0,IsFirstRequest:!1,NeedToTrack:!1,ECommerce:{Transactions:[],Carts:[],isInt:function(e){return isFinite(e)&&e%1==0},isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},is:function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e},ValidateForArray:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw"validatation config is invalid";for(var i=0;i<t.length;i++){var n=t[i];this.ValidateBase(e,n),this.ValidateMembers(e,n)}},Validate:function(e,t){if(void 0===e||void 0===t||null===e||null===t)throw"validatation config is invalid";if(e.length!==t.length)throw"invalid number of arguments";for(var i=0;i<e.length;i++){var n=e[i],o=t[i];this.ValidateBase(n,o),this.ValidateMembers(n,o)}},ValidateMembers:function(e,t){if(void 0!==e.RequiredMembers&&null!==e.RequiredMembers)for(var i=0;i<e.RequiredMembers.length;i++){var n,o=e.RequiredMembers[i];if(void 0===o.Name||null==o.Name)throw"validatation config is invalid";if(o.isCaseInsensitive){if(null==(n=this.GetValueFromObject(t,o.Name))||this.is("String",n)&&""==n)throw o.Name+" is required"}else if(void 0===(n=t[o.Name])||null==n||this.is("String",n)&&""==n)throw o.Name+" is required";this.ValidateBase(o,n),this.ValidateMembers(o,n)}},ValidateBase:function(e,t){if(void 0===t||null==t)throw"invalid argument type";if(void 0!==e.Type&&null!==e.Type)if("int"===e.Type){if(!this.isNumber(t)||!this.isInt(t))throw"invalid argument type"}else if("float"===e.Type){if(!this.isNumber(t))throw"invalid argument type"}else if(!this.is(e.Type,t))throw"invalid argument type"},AddTransaction:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idTransaction"}]}],arguments),this.removeOldObjectFromArray(this.Transactions,"idTransaction",e.idTransaction),this.Transactions.push(e)},UpdateTransaction:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idTransaction"}]}],arguments),this.updateArrayFromObject(this.Transactions,"idTransaction",e.idTransaction,e)},UpdateTransactionItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idProduct"}]}],arguments);var t=this.getItemInArray(this.Transactions,"idTransaction",e.idTransaction);this.updateArrayFromObject(t.items,"idProduct",e.idProduct,e)},AddItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idTransaction"},{Name:"idProduct"}]}],arguments);var t=this.getItemInArray(this.Transactions,"idTransaction",e.idTransaction);if(null==t)throw"invalid idTransaction";void 0===t.items&&(t.items=[]),this.removeOldObjectFromArray(t.items,"idProduct",e.idProduct),t.items.push(e)},RemoveItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idTransaction"},{Name:"idProduct"}]}],arguments);var t=this.getItemInArray(this.Transactions,"idTransaction",idTransaction);if(null==t)throw"invalid idTransaction";void 0===t.items&&(t.items=[]),this.removeOldObjectFromArray(t.items,"idProduct",e.idProduct)},AddCart:function(e){return this.Validate([{Type:"Object",RequiredMembers:[{Name:"idCart"},{Name:"TotalPrice",Type:"float",isCaseInsensitive:!0}]}],arguments),this.removeOldObjectFromArray(this.Carts,"idCart",e.idCart),this.Carts.push(e),e},AddCartItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idCart"},{Name:"idProduct"},{Name:"priceunit",Type:"float",isCaseInsensitive:!0},{Name:"quantity",Type:"int",isCaseInsensitive:!0}]}],arguments);var t=this.getItemInArray(this.Carts,"idCart",e.idCart);if(null==t)throw"cannot found cart";void 0===t.items&&(t.items=[]),this.removeOldObjectFromArray(t.items,"idProduct",e.idProduct),t.items.push(e)},UpdateCartItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idProduct"}]}],arguments);var t=this.getItemInArray(this.Carts,"idCart",e.idCart);this.updateArrayFromObject(t.items,"idProduct",e.idProduct,e)},RemoveCartItem:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idCart"},{Name:"idProduct"}]}],arguments);var t=this.getItemInArray(this.Carts,"idCart",e.idCart);if(null==t)throw"invalid idCart";void 0===t.items&&(t.items=[]),this.removeOldObjectFromArray(t.items,"idProduct",e.idProduct)},UpdateCart:function(e){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idCart"}]}],arguments),this.updateArrayFromObject(this.Carts,"idCart",e.idCart,e)},ClearCart:function(){this.Carts=[]},ClearTransaction:function(){this.Transactions=[]},ProductView:function(e){if(this.is("Object",e)){this.Validate([{Type:"Object",RequiredMembers:[{Name:"idProduct"}]}],arguments);var t=this.GetValueFromObject(e,"Product"),i=null!=t,n=this.GetValueFromObject(e,"Category"),o=null!=n;if(i)if(this.Validate([{Type:"Object",RequiredMembers:[{Name:"idProduct"}]}],[t]),this.GetValueFromObject(t,"idProduct")!=this.GetValueFromObject(e,"idProduct"))throw"invalid idProduct";if(o&&this.Validate([{Type:"Object",RequiredMembers:[{Name:"idCategory"}]}],[n]),o&&i){var r=this.GetValueFromObject(t,"idCategory"),a=this.GetValueFromObject(n,"idCategory");if(null!=r&&r!=a)throw"invalid idCategory"}this.Submit("OFSYS_ECommerce_View",e)}else this.Submit("OFSYS_ECommerce_View",{idProduct:e})},SubmitCart:function(){if(void 0===this.Carts||null==this.Carts||!this.is("Array",this.Carts)||0==this.Carts.length)throw"no cart";this.ValidateForArray([{Name:"idCart",isCaseInsensitive:!0},{Name:"TotalPrice",Type:"float",isCaseInsensitive:!0},{Name:"items",Type:"Array",isCaseInsensitive:!0}],this.Carts);for(var e=[{Name:"idCart",isCaseInsensitive:!0},{Name:"idProduct",isCaseInsensitive:!0},{Name:"productName",Type:"String",isCaseInsensitive:!0},{Name:"priceunit",Type:"float",isCaseInsensitive:!0},{Name:"quantity",Type:"int",isCaseInsensitive:!0}],t=0;t<this.Carts.length;t++){var i=this.Carts[t],n=this.GetValueFromObject(i,"items");0!=n.length&&this.ValidateForArray(e,n)}this.Submit("OFSYS_ECommerce_Cart",this.Carts)},SubmitTransaction:function(){if(void 0===this.Transactions||null==this.Transactions||!this.is("Array",this.Transactions)||0==this.Transactions.length)throw"no transaction";this.ValidateForArray([{Name:"idTransaction",isCaseInsensitive:!0},{Name:"revenue",Type:"float",isCaseInsensitive:!0},{Name:"tax",Type:"float",isCaseInsensitive:!0},{Name:"shipping",Type:"float",isCaseInsensitive:!0},{Name:"items",Type:"Array",isCaseInsensitive:!0}],this.Transactions);for(var e=[{Name:"idTransaction",isCaseInsensitive:!0},{Name:"idProduct",isCaseInsensitive:!0},{Name:"productName",Type:"String",isCaseInsensitive:!0},{Name:"price_unit",Type:"float",isCaseInsensitive:!0},{Name:"quantity",Type:"int",isCaseInsensitive:!0},{Name:"price_total",Type:"float",isCaseInsensitive:!0}],t=0;t<this.Transactions.length;t++){var i=this.Transactions[t],n=this.GetValueFromObject(i,"items");if(0==n.length)throw"no items in transaction "+i.idTransaction;this.ValidateForArray(e,n)}this.Submit("OFSYS_ECommerce_Transaction",this.Transactions)},Submit:function(evtName,data){var url;OFSYS_Tracker2.IsDummy||void 0===data||null==data||this.is("Array",data)&&0==data.length||(OFSYS_Tracker2.ClearEventFromData(),OFSYS_Tracker2.Set("OFSYS_E0",evtName),url=OFSYS_Tracker2.GetTrackingURL(),OFSYS_Tracker2.corsAjax({url:url,data:JSON.stringify(data),success:function(responseText){void 0!==OFSYS_Tracker2.Data.OFSYSDebugProcess&&1==OFSYS_Tracker2.Data.OFSYSDebugProcess&&eval(responseText)},error:function(e,t){void 0!==OFSYS_Tracker2.Data.OFSYSDebug&&console.log(t)}}))},GetValueFromObject:function(e,t){for(var i in e)if(i.toLowerCase()==t.toLowerCase())return e[i];return null},removeOldObjectFromArray:function(e,t,i){for(var n in e)if(this.GetValueFromObject(e[n],t)==i)return void e.splice(n,1)},updateArrayFromObject:function(e,t,i,n){var o=this.getItemInArray(e,t,i);if(null!=o)for(var r in n)o[r]=n[r]},getItemInArray:function(e,t,i){for(var n in e)if(this.GetValueFromObject(e[n],t)==i)return e[n];return null}},SetInterceptionConfigs:function(e){this.InterceptionConfigs=e},SetExtraStorageDataConfigs:function(e){this.ExtraStorageDataConfigs=e},ClearEventFromData:function(){for(var e in this.Data)0==e.indexOf("OFSYS_E")&&delete this.Data[e]},GetKeyForConsent:function(){return"OFSYS_Consent_".concat(this.Data.ClientCode)},SetConsent:function(e){if(!1!==e&&!0!==e)throw"Parameter is not a boolean";this.setCookie(this.GetKeyForConsent(),e,15),e?(this.IsFirstRequest=!1,this.NeedToTrack&&this.Track()):!1===e&&this.SupportLocalStorage()&&(localStorage.clear(),sessionStorage.clear())},IsConsented:function(){var e=this.getCookie(this.GetKeyForConsent());return""==e?!this.CheckConsent||(this.SetConsent(!0),!(this.IsFirstRequest=!0)):"true"===e&&!this.IsFirstRequest},setCookie:function(e,t,i){var n=new Date;n.setTime(n.getTime()+24*i*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"},getCookie:function(e){for(var t=e+"=",i=decodeURIComponent(document.cookie).split(";"),n=0;n<i.length;n++){for(var o=i[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""},Track:function(){var e;if(!this.IsDummy)if(this.IsConsented()){if(this.NeedToTrack&&(this.NeedToTrack=!1),void 0!==this.Data.ClientCode&&(null==document.body&&(e=document.createElement("body"),document.body=e),this.Set("ScreenHeight",screen.height.toString()),this.Set("ScreenWidth",screen.width.toString()),this.Set("OFSYS_Referrer",document.referrer.substr(0,256)),!(0<arguments.length&&this.ExtraData(arguments[0].toString())))){this.ClearEventFromData();if(2==arguments.length&&arguments[1].constructor==={}.constructor)this.Set("OFSYS_E0",arguments[0].toString()),this.SetJSON(arguments[1]);else if(0<arguments.length)for(var t=0;t<arguments.length;t++)this.Set("OFSYS_E"+t,arguments[t].toString());this.setWebStorage();var i=this.QueryString();if(void 0!==i.JourneyTraces&&"1"===i.JourneyTraces&&this.Set("forTracing","1"),void 0!==i.OFSYSDebugProcess&&this.Set("OFSYSDebugProcess",i.OFSYSDebugProcess),void 0!==i.OFSYSDebug&&this.Set("OFSYSDebug",i.OFSYSDebug),void 0!==this.Data.OFSYSDebugProcess&&1==this.Data.OFSYSDebugProcess){var n=document.createElement("script");n.type="text/javascript",n.src=OFSYS_Tracker2.GetTrackingURL(),console.log("processing..."),document.body.appendChild(n)}else{var o=document.createElement("img");if(o.src=OFSYS_Tracker2.GetTrackingURL(),void 0===this.Data.OFSYSDebug&&(o.height=1,o.width=1,o.style.display="none"),void 0!==i.JourneyTraces&&"1"===i.JourneyTraces){for(var r="L'envoi au module Parcours s'est effectué avec succès.",a=[],s=this.GetOfsysParameters(),t=0;t<s.length;t++){"oft_campaign"!==(c=s[t])&&void 0!==this.Data[c]&&a.push(c)}for(var c in this.Data)-1!==c.indexOf("f_")&&a.push(c);if(0==a.length)r+="\\n\\nAucun identifiant n'a été transmis.";else{r+="\\n\\nLes identifiants suivant ont été transmis : ";for(t=0;t<a.length;t++){c=a[t];r+="\\n"+c+" : "+this.Data[c]}}r+="\\n\\nLe traitement de ces données peut prendre quelques minutes. Une fois le traitement terminé, les résultats s'afficheront dans la page de diagnostique.",document.addEventListener?o.addEventListener("load",function(){this.parentNode.removeChild(this),console.log(r)}):o.setAttribute("onload",'this.parentNode.removeChild(this); console.log("'+r+'");')}else document.addEventListener?o.addEventListener("load",function(){this.parentNode.removeChild(this)}):o.setAttribute("onload","this.parentNode.removeChild(this)");document.body.appendChild(o)}var d,l,u,h;0==window.name.indexOf("OFSYS_Test_Interceptor")?(d=document.location.protocol,this.DebugMode=!0,l=window.name.split("_"),u=d+"//app.mydialoginsight.com/T/OFC4/IST2/"+this.Data.ClientCode+"/"+l[l.length-1]+".ofsys",console.log(u),(h=this).corsAjax({url:u,data:null,success:function(e){var t,i,n=JSON.parse(e);h.CurrentInterceptor=n,"undefined"==typeof ofsysInterception?(t=d+"//t.mydialoginsight.com/js/Tracking2/package-min.js",(i=document.createElement("script")).type="text/javascript",i.src=t,document.body.appendChild(i),i.setAttribute("onload","OFSYS_Tracker2.ShowInterceptor();")):h.ShowInterceptor()},error:function(e,t){void 0!==h.Data.OFSYSDebug&&console.log(t)}})):this.SupportLocalStorage()&&null!=this.InterceptionConfigs&&this.EvaluateInterceptions()}}else this.NeedToTrack=!0},GetOfsysParameters:function(){return["oft_id","oft_k","oft_lk","oft_d","oft_c","oft_ck","oft_campaign","oft_ids","oft_sk"]},UpdateTime:function(){var e,t="OFSYS_Visitor_"+this.Data.ClientCode,i=localStorage.getItem(t);new Date;null!=i&&((e=JSON.parse(i)).CurrentVisitSecond=e.CurrentVisitSecond+this.TimerStepSecond,e.TotalSecondOpen=e.TotalSecondOpen+this.TimerStepSecond,localStorage.setItem(t,JSON.stringify(e)))},setWebStorage:function(){if(this.SupportLocalStorage()&&void 0!==this.Data.ClientCode){document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:""));this.QueryString();var e=this.GetOfsysParameters(),t="OFSYS_Visit_"+this.Data.ClientCode,i="OFSYS_Visitor_"+this.Data.ClientCode,n="OFSYS_Interception_"+this.Data.ClientCode,o=localStorage.getItem(n),r=sessionStorage.getItem(t),a=localStorage.getItem(i),s={},c={};null!=r&&(s=JSON.parse(r)),null!=a&&(c=JSON.parse(a));var d=this.GetAllValuesDic();void 0===c.vKey&&(c.vKey=this.generateUniqueID());var l=null==r;if(null!=r){for(var u=0;u<e.length;u++){if(void 0!==d[h=e[u]]&&(void 0===s[h]||void 0!==s[h]&&d[h].toLowerCase()!=s[h].toLowerCase())){l=!0;break}}if(!l)for(var h in d)if(-1!=h.indexOf("f_")&&(void 0===s[h]||void 0!==s[h]&&d[h].toLowerCase()!=s[h].toLowerCase())){l=!0;break}}var p=(new Date).getTime();if((void 0===s.vKey||l)&&(s.vKey=this.generateUniqueID(),null!=o)){var m=JSON.parse(o);for(var h in m)void 0!==m[h].VisitCountSinceLastDisplay&&(m[h].VisitCountSinceLastDisplay=m[h].VisitCountSinceLastDisplay+1);localStorage.setItem(n,JSON.stringify(m))}for(var f,C,g=!1,u=0;u<e.length;u++){var v=e[u];if(void 0!==d[v]){if(s[v]=d[v],"oft_campaign"==v)continue;g=!0,void 0!==c[v]&&delete c[v]}}for(var h in d)-1!=h.indexOf("f_")&&(g=!0,s[h]=d[h],void 0!==c[h]&&delete c[h]);void 0!==this.Data.OFSYS_E0&&(c["OFSYSEVENT_dtLastHit_"+(f=this.Data.OFSYS_E0)]=p,void 0===c[C="OFSYSEVENT_countHit_"+f]?(c[C]=1,c["OFSYSEVENT_dtFirstHit_"+f]=p):c[C]=c[C]+1),void 0!==c.VisitCount&&l?c.VisitCount=c.VisitCount+1:!l&&void 0!==c.VisitCount||(c.VisitCount=1),void 0===c.dtFirstVisit?c.dtFirstVisit=p:void 0!==c.dtLastVisit&&l&&(c.dtPreviousVisit=c.dtLastVisit),l||void 0===c.openedPageCount?(c.openedPageCount=1,c.lastOpenedPage=document.location.origin+document.location.pathname):void 0!==c.openedPageCount&&void 0!==c.openedPageCount&&c.lastOpenedPage!=document.location.origin+document.location.pathname&&(c.openedPageCount=c.openedPageCount+1),l||void 0===c.openedPageCount||(c.lastOpenedPage=document.location.origin+document.location.pathname),!l&&void 0!==c.dtLastVisit||(c.dtLastVisit=p),void 0!==c.HitCount?c.HitCount=c.HitCount+1:c.HitCount=1,l||void 0===c.HitCurrentVisit?c.HitCurrentVisit=1:void 0!==c.HitCurrentVisit&&(c.HitCurrentVisit=c.HitCurrentVisit+1),c.TotalVisitSecond=this.getDiffSeconds(new Date(c.dtFirstVisit),new Date(p)),void 0===c.TotalSecondOpen&&(c.TotalSecondOpen=0),l||void 0===c.CurrentVisitSecond?c.CurrentVisitSecond=0:void 0!==c.dtLastVisit&&(c.CurrentVisitSecond=this.getDiffSeconds(new Date(c.dtLastVisit),new Date(p))),c.dtLastHit=p,g?c.IsIdentified=!0:void 0===c.IsIdentified&&(c.IsIdentified=!1),sessionStorage.setItem(t,JSON.stringify(s)),localStorage.setItem(i,JSON.stringify(c));var S;-1==window.name.indexOf("OFSYS_Test_Interceptor")&&null==this.TimerUpdate&&((S=this).TimerUpdate=setInterval(function(){try{if(S.UpdateTime(),null!==S.InterceptionConfigs)for(var e=0;e<S.InterceptionConfigs.length;e++)if(null===S.CurrentInterceptor&&null!==S.InterceptionConfigs[e].Config&&(null!==S.InterceptionConfigs[e].Config.Timing||null!==S.InterceptionConfigs[e].Config.EventConditions)){S.EvaluateInterceptions();break}}catch(e){S.AlreadyDisplayError||(S.AlreadyDisplayError=!0,console.log(e))}},1e3*S.TimerStepSecond))}},getDiffSeconds:function(e,t){var i=Math.abs(t.getTime()-e.getTime());return Math.ceil(i/1e3)},addDays:function(e,t){var i=new Date(e);return i.setDate(i.getDate()+t),i},generateUniqueID:function(){return"xxxxxxxx".replace(/[x]/g,function(e){return"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".charAt(Math.floor(62*Math.random()))})},QueryString:function(){for(var e={},t=window.location.search.substring(1).split("&"),i=0;i<t.length;i++){var n,o=t[i].split("=");void 0===e[o[0]]?e[o[0]]=o[1]:"string"==typeof e[o[0]]?(n=[e[o[0]],o[1]],e[o[0]]=n):e[o[0]].push(o[1])}return e},GetTrackingURL:function(){if(void 0===this.Data.ClientCode)return"";var e,t,i="",n=0;for(var o in this.Data)"ClientCode"!=o&&(0<n&&(i+="("),i+=this.Base64_Encode(o)+")"+this.Base64_Encode(this.Data[o]),n++);this.SupportLocalStorage()?(void 0!==localStorage["OFSYS_Visitor_"+this.Data.ClientCode]&&void 0!==sessionStorage["OFSYS_Visit_"+this.Data.ClientCode]||this.setWebStorage(),e=JSON.parse(localStorage["OFSYS_Visitor_"+this.Data.ClientCode]),t=JSON.parse(sessionStorage["OFSYS_Visit_"+this.Data.ClientCode]),void 0!==e.vKey&&(i+="(",i+=this.Base64_Encode("visitorKey")+")"+this.Base64_Encode(String(e.vKey))),void 0!==t.vKey&&(i+="(",i+=this.Base64_Encode("visitKey")+")"+this.Base64_Encode(String(t.vKey)))):(i+="(",i+=this.Base64_Encode("lstorage")+")"+this.Base64_Encode("0"));var r=document.location.protocol+"//t.mydialoginsight.com/C/"+this.Data.ClientCode+"/"+this.Version()+"/"+this.CRC32(i)+"/journey.gif?cache="+(new Date).getTime();return 0<i.length&&(r+="&d="+encodeURIComponent(i)),r},GetAllValuesDic:function(){for(var e=this.GetOfsysParameters(),t={},i=this.QueryString(),n=0;n<e.length;n++)void 0!==i[e[n]]&&(t[e[n]]=i[e[n]]);for(var o in this.Data)"ClientCode"!=o&&(t[o]=this.Data[o]);return t},SupportLocalStorage:function(){var e="ofsys_test";try{localStorage.setItem(e,e);var t=localStorage[e]==e;return localStorage.removeItem(e),t}catch(e){return!1}},EvaluateInterceptions:function(){if(!this.SupportLocalStorage()||void 0===this.Data.ClientCode||null==this.InterceptionConfigs)return!1;for(var e="OFSYS_Interception_"+this.Data.ClientCode,t=localStorage.getItem(e),i="OFSYS_Visitor_"+this.Data.ClientCode,n=localStorage.getItem(i),o=JSON.parse(n),r=new Date,a=null,s=[],c=0,d=1,l=2,u=3,h=4,p=0;p<this.InterceptionConfigs.length;p++){var m=this.InterceptionConfigs[p].Config;if(null==a||2===m.InterceptionType){if(document.location.origin||(document.location.origin=document.location.protocol+"//"+document.location.hostname+(document.location.port?":"+document.location.port:"")),m.displayEveryWhere){if(this.ValidateAddress(document.location.origin+document.location.pathname,m.Address))continue}else if(!this.ValidateAddress(document.location.origin+document.location.pathname,m.Address))continue;if(null!=m.Timing){if(null!=m.Timing.AfterNbOpenedPages&&o.openedPageCount<m.Timing.AfterNbOpenedPages)continue;if(m.Timing.AfterNbSecondsVisit&&o.CurrentVisitSecond<m.Timing.AfterNbSecondsVisit)continue}var f,C,g=null;if(null==t||void 0!==(f=JSON.parse(t))[this.InterceptionConfigs[p].idInterceptor]&&(g=f[this.InterceptionConfigs[p].idInterceptor]),null!=m.Recurrence){if(null!=m.Recurrence.DisplayOnlyOneTime&&m.Recurrence.DisplayOnlyOneTime&&null!=g&&1<=g.DisplayInterceptorTotalCount)continue;if(m.Recurrence.NbDisplaysByPeriod&&null!=g)if(m.Recurrence.PeriodType==h){if(void 0!==g.VisitCountSinceLastDisplay&&m.Recurrence.NbDisplaysByPeriod>g.VisitCountSinceLastDisplay)continue}else{var v=new Date(g.dtDisplay[g.dtDisplay.length-1]),S=new Date(r);if(m.Recurrence.PeriodType==c?S.setDate(r.getDate()-m.Recurrence.NbDisplaysByPeriod):m.Recurrence.PeriodType==d?S.setDate(r.getDate()-7*m.Recurrence.NbDisplaysByPeriod):m.Recurrence.PeriodType==l?S.setMonth(r.getMonth()-m.Recurrence.NbDisplaysByPeriod):m.Recurrence.PeriodType==u&&S.setYear(r.getFullYear()-m.Recurrence.NbDisplaysByPeriod),S<=v)continue}}if(null!=m.DataCondition){var y=o.IsIdentified;if(!m.DataCondition.AllowKnownVisitorInterception&&y)continue;if(!m.DataCondition.AllowAnonymousInterception&&!y)continue}if(this.InterceptionConfigs[p].useAdvancedMode){if(null!=m.Timing){if(null!=m.Timing.AfterNbVisits&&o.VisitCount<m.Timing.AfterNbVisits)continue;if(null!=m.Timing.AfterNbSecondsVisit&&o.CurrentVisitSecond<m.Timing.AfterNbSecondsVisit)continue;if(null!=m.Timing.AfterNbSeconds&&o.TotalVisitSecond<m.Timing.AfterNbSeconds)continue;if(null!=m.Timing.NbDaysSinceFirstVisit&&this.addDays(new Date(o.dtFirstVisit),m.Timing.NbDaysSinceFirstVisit)>r)continue;if(null!=m.Timing.NbDaysSinceLastVisit&&this.addDays(new Date(o.dtLastVisit),m.Timing.NbDaysSinceLastVisit)>r)continue}if(null!=m.EventConditions){if(null!=m.EventConditions.NbEventTimes)if(void 0===(C=o["OFSYSEVENT_countHit_"+m.EventConditions.NbEventTimesEventName])||C<m.EventConditions.NbEventTimes)continue;if(null!=m.EventConditions.NbEventNeverOccurred&&void 0!==o["OFSYSEVENT_dtLastHit_"+m.EventConditions.NbEventNeverOccurred])continue;if(null!=m.EventConditions.NbSecondsAfterFirstEvent)if(void 0===(C=o["OFSYSEVENT_dtFirstHit_"+m.EventConditions.NbSecondsAfterFirstEventName])||this.getDiffSeconds(new Date(C),r)<m.EventConditions.NbSecondsAfterFirstEvent)continue;if(null!=m.EventConditions.NbSecondsAfterLastEvent)if(void 0===(C=o["OFSYSEVENT_dtLastHit_"+m.EventConditions.NbSecondsAfterLastEventName])||this.getDiffSeconds(new Date(C),r)<m.EventConditions.NbSecondsAfterLastEvent)continue}2!==m.InterceptionType?a=this.InterceptionConfigs[p]:s.push(this.InterceptionConfigs[p])}else 2!==m.InterceptionType?a=this.InterceptionConfigs[p]:s.push(this.InterceptionConfigs[p])}}null!=a&&null!=a.Config.Timing&&void 0!==a.Config.Timing.BeforeLeavingThePage&&null!=a.Config.Timing.BeforeLeavingThePage&&!0===a.Config.Timing.BeforeLeavingThePage?setTimeout(function(){var e,t,i,n=function(e){var t,i=(e=e||window.event).relatedTarget||e.toElement;"input"!=e.target.tagName.toLowerCase()&&(t=Math.max(document.documentElement.clientWidth,window.innerWidth||0),e.clientX>=t-50||50<=e.clientY||i&&"HTML"!=i.nodeName||null==DI.Journey.CurrentInterceptor&&(this.removeEventListener?this.removeEventListener("mouseout",n):this.detachEvent&&this.detachEvent("onmouseout",n),DI.Journey.UpdateInterceptionLocalStorage(a),DI.Journey.Intercept(a)))};e=document,t="mouseout",i=n,e.addEventListener?e.addEventListener(t,i,!1):e.attachEvent&&e.attachEvent("on"+t,i)},0):null!=a&&null==this.CurrentInterceptor&&(this.UpdateInterceptionLocalStorage(a),this.Intercept(a));for(p=0;p<s.length;p++)this.UpdateInterceptionLocalStorage(s[p]),this.Trigger(s[p])},Trigger:function(trigger){var ofsysParameters=this.GetOfsysParameters(),visitStorageKey="OFSYS_Visit_"+this.Data.ClientCode,visit=sessionStorage.getItem(visitStorageKey),visitValue={};null!=visit&&(visitValue=JSON.parse(visit));var allValuesDic=this.GetAllValuesDic();for(var key in visitValue)if(void 0===allValuesDic[key]&&"oft_campaign"!==key.toLowerCase()){for(var isOfsysParameter=!1,i=0;i<ofsysParameters.length;i++){var pName=ofsysParameters[i];if(pName.toLowerCase()===key.toLowerCase()){isOfsysParameter=!0;break}}-1===key.toLowerCase().indexOf("f_")&&!isOfsysParameter||this.Set(key,visitValue[key])}var url=this.GetTrackingURL()+"&ofsystrigger=1",that=this;this.corsAjax({url:url,data:JSON.stringify({Type:"Trigger",idInterceptor:trigger.idInterceptor}),success:function(responseText){void 0!==that.Data.OFSYSDebugProcess&&1==that.Data.OFSYSDebugProcess&&eval(responseText)},error:function(e,t){void 0!==that.Data.OFSYSDebug&&console.log(t)}})},ValidateAddress:function(e,t){if(void 0===t||null==t||0==t.length)return!1;for(var i=0;i<t.length;i++)if("*"==t[i])return!0;for(i=0;i<t.length;i++){if(new RegExp("^"+t[i].replace(new RegExp("\\*","g"),".*")+"$","i").test(e))return!0}return!1},corsAjax:function(t){try{var e,i=new XMLHttpRequest,n="withCredentials"in i;null!=window.XDomainRequest&&!n?((e=new XDomainRequest).open("POST",t.url),e.ontimeout=function(){t.error(408,"timeout")},e.onerror=function(){t.error(500,"error")},e.onload=function(){t.success(e.responseText)},setTimeout(function(){e.send(t.data)},0)):(i.open("POST",t.url,!0),i.setRequestHeader("Content-type","contentType"in t?t.contentType:"text/plain"),i.onreadystatechange=function(){4==i.readyState&&(200==i.status?t.success(i.responseText):t.error(i.status,i.responseText))},i.send(t.data))}catch(e){t.error(500,"exception "+e),window.console&&console.error(e)}},ExtraData:function(evt){if(!this.SupportLocalStorage()||void 0===this.Data.ClientCode||null==this.ExtraStorageDataConfigs||void 0===this.ExtraStorageDataConfigs[evt])return!1;var mappings=this.ExtraStorageDataConfigs[evt],ExtraStorageName="OFSYS_Extra_"+this.Data.ClientCode+"_"+evt,extraCookieValues=null!=localStorage.getItem(ExtraStorageName)?JSON.parse(localStorage[ExtraStorageName]):null,now=(new Date).getTime();null==extraCookieValues?(extraCookieValues={},extraCookieValues.dtFirstHit=now,extraCookieValues.dtLastHit=now,extraCookieValues.vkeyVisitor=JSON.parse(localStorage.getItem("OFSYS_Visitor_"+this.Data.ClientCode)).vKey,extraCookieValues.totalHit=1):(extraCookieValues.dtLastHit=now,extraCookieValues.totalHit=extraCookieValues.totalHit+1);for(var CookieEventMappingType={Variable:1,Counter:2,DateTime:3},allValues=this.GetAllValuesDic(),i=0;i<mappings.length;i++){var stem=mappings[i];if(stem.MappingType==CookieEventMappingType.Counter){var count,incrementCounter=!1;if(null==stem.Condition||""==stem.Condition)incrementCounter=!0;else if(stem.isConditionExpression||void 0===allValues[stem.Condition])try{incrementCounter=eval(stem.Condition)}catch(e){incrementCounter=!1}else incrementCounter=!0;incrementCounter&&(void 0!==extraCookieValues[stem.Code]?extraCookieValues[stem.Code]=extraCookieValues[stem.Code]+1:extraCookieValues[stem.Code]=1)}else if(stem.MappingType==CookieEventMappingType.Variable){var updateValue=!1;if(null==stem.Condition||""==stem.Condition)updateValue=!0;else if(stem.isConditionExpression||void 0===allValues[stem.Condition]||null==allValues[stem.Condition]||""==allValues[stem.Condition]){if(stem.isConditionExpression)try{updateValue=eval(stem.Condition)}catch(e){updateValue=!1}}else updateValue=!0;if(updateValue)if(null!=stem.Value&&""!=stem.Value&&stem.isValueExpression)try{extraCookieValues[stem.Code]=eval(stem.Value)}catch(e){}else null!=stem.Value&&""!=stem.Value&&(extraCookieValues[stem.Code]=stem.Value)}else if(stem.MappingType==CookieEventMappingType.DateTime){var updateDate=!1;if(null==stem.Condition||""==stem.Condition)updateDate=!0;else if(stem.isConditionExpression||void 0===allValues[stem.Condition])try{updateDate=eval(stem.Condition)}catch(e){updateDate=!1}else updateDate=!0;updateDate&&(extraCookieValues[stem.Code]=now)}}return localStorage.setItem(ExtraStorageName,JSON.stringify(extraCookieValues)),!0},SetJSON:function(e){if(e.constructor!={}.constructor)throw"invalid object";var t=JSON.stringify(e),e=JSON.parse(t);for(var i in e)this.Set(i,e[i])},Set:function(e,t){null!=t&&void 0!==t&&void 0!==e&&0<e.length&"_"!=e[0]&&(this.Data[e]="string"==typeof t?t:t.toString())},Base64_Encode:function(e){var t,i,n,o,r,a,s="",c=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=this.UTF8_Encode(e);c<e.length;)o=(3&(t=e.charCodeAt(c++)))<<4|(i=e.charCodeAt(c++))>>4,r=(15&i)<<2|(n=e.charCodeAt(c++))>>6,a=63&n,s=s+d.charAt(t>>2)+d.charAt(o),isNaN(i)||(s+=d.charAt(r)),isNaN(n)||(s+=d.charAt(a));return s},UTF8_Encode:function(e){for(var t="",i=(new String(e).replace(/\r\n/g,"\n"),0);i<e.length;i++){var n=e.charCodeAt(i);n<128?t+=String.fromCharCode(n):(127<n&&n<2048?t+=String.fromCharCode(n>>6|192):(t+=String.fromCharCode(n>>12|224),t+=String.fromCharCode(n>>6&63|128)),t+=String.fromCharCode(63&n|128))}return t},CRC32:function(e){for(var t=this.CRC32_Table(),i=4294967295,n=e.length,o=0;o<n;o++)(i=i>>>8^t[255&i^e.charCodeAt(o)])<0&&(i+=Math.pow(2,32));return(i^=4294967295)<0&&(i+=Math.pow(2,32)),i},CRC32_Table:function(){for(var e,t=[],i=0;i<256;i++){e=i;for(var n=0;n<8;n++)1&e?e=e>>>1^3988292384:e>>>=1;t[i]=e}return t},SetClientCode:function(e){this.Set("ClientCode",e)},UpdateInterceptionLocalStorage:function(e){var t,i=e.idInterceptor,n="OFSYS_Interception_"+this.Data.ClientCode,o=localStorage.getItem(n),r={},a=(new Date).getTime();null!=o&&(r=JSON.parse(o)),void 0===r[i]?((t={DisplayInterceptorTotalCount:1,VisitCountSinceLastDisplay:0,dtDisplay:[]}).dtDisplay.push(a),r[i]=t):(r[i].dtDisplay.push(a),200<r[i].dtDisplay&&r[i].dtDisplay.splice(0,1),r[i].DisplayInterceptorTotalCount=r[i].DisplayInterceptorTotalCount+1,r[i].VisitCountSinceLastDisplay=0),localStorage.setItem(n,JSON.stringify(r))},Intercept:function(e){this.CurrentInterceptor=e,this.ShowInterceptor()},GetInterceptorContent:function(e){var t,i;void 0!==this.Data.ClientCode&&(t=document.location.protocol+"//t.mydialoginsight.com/js/Journey/1/"+this.Data.ClientCode+"/"+e.idInterceptor+"/interceptorcontent.js",(i=document.createElement("script")).type="text/javascript",i.src=t,document.body.appendChild(i))},ShowInterceptor:function(){var e,t,i,n,o,r,a,s,c=1===this.CurrentInterceptor.Config.InterceptionType,d=this.CurrentInterceptor.Content;void 0!==d||c?(c&&(t="https:",void 0!==this.Data.OFSYSDebug&&(t=document.location.protocol),i=this.CurrentInterceptor.Config.DirectFormConfig.strParam+"?DI_Intercept=1",(o=n=null)!=this.CurrentInterceptor.Config.DirectFormConfig.height&&((n=this.CurrentInterceptor.Config.DirectFormConfig.height)<(r=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-130)?o=n:r<=n&&(o=r)),e=ofsysInterception.dom.create("iframe",{style:"border: 0px none;width:100%;height:calc(100% - 5px);",src:t+"//app.mydialoginsight.com"+i}),this.CurrentInterceptor.iframe=e,this.CurrentInterceptor.height=o),void 0!==window.OFSYS_Tracking_ShowInterceptor?(a=document.createElement("div",{style:{overflow:"auto"}}),null!=this.CurrentInterceptor.height&&a.setStyle("height",this.CurrentInterceptor.height+"px"),c?ofsysInterception.dom.wrap(a).append(e):a.insertAdjacentHTML("beforeEnd",d),OFSYS_Tracking_ShowInterceptor(a)):(s=this.CreateInterceptorPopupDiv(c),null!=this.CurrentInterceptor.height&&s.setStyle("height",this.CurrentInterceptor.height+"px"),c?(s.append(e),ofsysInterception.dom.on(e.elem,"load",this.ShowPopupDirectForm)):(s.append(ofsysInterception.dom.parse("<div>"+d+"</div>")),this.ShowPopup())),this.DisplayInterception()):this.GetInterceptorContent(this.CurrentInterceptor)},ShowPopupDirectForm:function(){this.removeEventListener?this.removeEventListener("load",OFSYS_Tracker2.ShowPopupDirectForm):this.detachEvent&&this.detachEvent("onload",OFSYS_Tracker2.ShowPopupDirectForm),OFSYS_Tracker2.ShowPopup()},ShowPopup:function(){var e=document.activeElement,t=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,i=1===OFSYS_Tracker2.CurrentInterceptor.Config.InterceptionType&&null!=OFSYS_Tracker2.CurrentInterceptor.Config.DirectFormConfig.width?OFSYS_Tracker2.CurrentInterceptor.Config.DirectFormConfig.width:650;t<i+90&&(i<t?i-=55:i=t-70),ofsysInterception.lightbox.ShowDivInLightbox("OFSYS_Interceptor_Popup",{WrappingClass:"Interceptor",width:i,hideCallback:function(){DI.Journey.CurrentInterceptor.isClose=!0,e.focus(),DI.Journey.CloseInterception()}}),this.CurrentInterceptor.isClose=!1;var n=ofsysInterception.dom.select1(".Interceptor .DialogInsightLightBox"),o=void 0!==this.CurrentInterceptor.iframe;n.setAttr("role","dialog"),o?-1!==this.CurrentInterceptor.iframe.elem.src.toLowerCase().indexOf("fr-ca")?n.setAttr("aria-label","Formulaire d'abonnement"):n.setAttr("aria-label","Optin form"):n.setAttr("aria-label","Invitation"),n.setAttr("tabindex","-1"),n.focus();var r=n.find1(".DialogInsightLightBoxCloseButton");r.setAttr("aria-label","Close"),r.setAttr("tabindex","0"),ofsysInterception.dom.on(r.elem,"keydown",function(e){var t,i;DI.Journey.CurrentInterceptorIsClose()||(9===(i=(t=e||window.event).which||t.keyCode)&&(ofsysInterception.dom.util.cancelEvent(t),n.focus()),13===i&&ofsysInterception.dom.wrap(this).trigger("click"))}),ofsysInterception.dom.on(n.elem,"keydown",function(e){var t;DI.Journey.CurrentInterceptorIsClose()||27===((t=e||window.event).which||t.keyCode)&&r.trigger("click")})},CurrentInterceptorIsClose:function(){return void 0===this.CurrentInterceptor||null==this.CurrentInterceptor||void 0===this.CurrentInterceptor.isClose||this.CurrentInterceptor.isClose},ClosePopup:function(){DI.Journey.CurrentInterceptorIsClose()||ofsysInterception.dom.select1(".Interceptor .DialogInsightLightBox").find1(".DialogInsightLightBoxCloseButton").trigger("click")},ClosePopupIFrame:function(){void 0!==this.CurrentInterceptor.iframe&&DI.Journey.ClosePopup()},ResizeIFrame:function(e){var t,i,n;null!=this.CurrentInterceptor&&void 0!==this.CurrentInterceptor.iframe&&(1===this.CurrentInterceptor.Config.InterceptionType&&null!=this.CurrentInterceptor.Config.DirectFormConfig.height||(t=e,i=(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)-130,n=null,void 0!==this.CurrentInterceptor.height&&(n=this.CurrentInterceptor.height),i<e&&(t=i),(null==n||n<t)&&(this.CurrentInterceptor.height=t,this.CurrentInterceptor.iframe.parent().setStyle("height",t+"px"))))},SendInterceptionEvent:function(evtName){var url,that;this.DebugMode||null==this.CurrentInterceptor||(this.ClearEventFromData(),this.Set("OFSYS_E0",evtName),this.Set("OFSYS_E1",this.CurrentInterceptor.idInterceptor),url=this.GetTrackingURL(),that=this,this.corsAjax({url:url,data:"Interception",success:function(responseText){void 0!==that.Data.OFSYSDebugProcess&&1==that.Data.OFSYSDebugProcess&&eval(responseText)},error:function(e,t){void 0!==that.Data.OFSYSDebug&&console.log(t)}}))},CloseInterception:function(){this.SendInterceptionEvent("OFSYS_CloseInterception")},DisplayInterception:function(){this.SendInterceptionEvent("OFSYS_DisplayInterception")},AcceptInterception:function(e){null!=this.CurrentInterceptor&&(this.DebugMode||this.SendInterceptionEvent("OFSYS_AcceptInterception"),void 0!==e&&null!=e&&e.call(this))},SuccessfulInterception:function(){this.SendInterceptionEvent("OFSYS_SuccessInterception")},CreateInterceptorPopupDiv:function(e){var t=document.getElementById("OFSYS_Interceptor_Popup");return null!=t&&(t.innerHTML=""),null==t?(t=ofsysInterception.dom.create("div",{id:"OFSYS_Interceptor_Popup",style:{display:"none","padding-right":"15px"}}),e&&(t.setStyle("overflow","auto"),t.setStyle("-webkit-overflow-scrolling","touch")),ofsysInterception.dom.body().append(t)):t=ofsysInterception.dom.wrap(t),t},OFSYSInterceptionAction:function(){this.AcceptInterception(this.OFSYSInterceptionActionCallBack),this.ClosePopup()},OFSYSInterceptionActionCallBack:function(){0==this.CurrentInterceptor.Config.InterceptionType&&(3==this.CurrentInterceptor.Config.ActionConfig.ActionType?this.CurrentInterceptor.Config.ActionConfig.openInNewTab?window.open(this.CurrentInterceptor.Config.ActionConfig.strParam,"_blank"):location.href=this.CurrentInterceptor.Config.ActionConfig.strParam:window.open(this.CurrentInterceptor.Config.ActionConfig.strParam,"_blank","height=800,width=800"))},MessageReception:function(e){if(void 0!==e&&null!=e){var t,i,n=e;if(e.constructor==="".constructor)try{n=JSON.parse(e)}catch(e){return}void 0===n.data||null==n.data||"di:"==(t=""+n.data).substr(0,3)&&(void 0!==(i=JSON.parse(t.substr(3))).height&&null!==i.height&&DI.Journey.ResizeIFrame(i.height),void 0!==i.event&&"optinSuccess"===i.event?DI.Journey.SuccessfulInterception():void 0!==i.event&&"validationSuccess"===i.event?DI.Journey.AcceptInterception():void 0!==i.event&&"keydown_esc"===i.event&&DI.Journey.ClosePopupIFrame())}}});if("undefined"==typeof DI&&(DI={}),void 0===DI.Journey&&(DI.Journey=OFSYS_Tracker2),DI.Journey.Set("OFSYS_CurrentURL",location.href),window.addEventListener?window.addEventListener("message",DI.Journey.MessageReception,!1):window.attachEvent("onmessage",DI.Journey.MessageReception),"HeyJourney"==window.name)try{window.parent.postMessage("di:"+JSON.stringify({event:"HelloFromJourney"}),"*")}catch(e){console.error(e,"Postmessage failed")}function OFSYS_Tracking2_PluginLoadEvent(e){if("complete"===document.readyState)return setTimeout(e,1);var t,i=!1;function n(){i||(i=!0,e())}if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1);else if(document.attachEvent){try{var o=null!=window.frameElement}catch(e){}document.documentElement.doScroll&&!o&&!function t(){if(!i)try{document.documentElement.doScroll("left"),n()}catch(e){setTimeout(t,10)}}(),document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()})}window.addEventListener?window.addEventListener("load",n,!1):window.attachEvent?window.attachEvent("onload",n):(t=window.onload,window.onload=function(){t&&t(),n()})}OFSYS_Tracking2_PluginLoadEvent(function(){"HeyJourney"!=window.name&&(void 0!==window.OFSYS_Tracking_onload?window.OFSYS_Tracking_onload():OFSYS_Tracker2.Track(),"undefined"!=typeof OFSYS_WebPerso&&OFSYS_WebPerso.main())});OFSYS_Tracker2.SetClientCode('nAQAAG1WSHR6dTEAAABxVDF5ZkUTAAAA');OFSYS_Tracker2.CheckConsent = false;OFSYS_Tracker2.SetInterceptionConfigs([{"Config":{"displayEveryWhere":true,"Address":["https://reservation.thalasso-saintmalo.com/fr/le-grand-hotel-des-thermes/reservation*"],"Timing":{"AfterNbOpenedPages":null,"AfterNbHits":null,"AfterNbSeconds":null,"AfterNbSecondsPeriod":0,"AfterNbSecondsVisit":null,"AfterNbSecondsVisitPeriod":1,"AfterNbVisits":null,"NbDaysSinceLastVisit":null,"NbDaysSinceFirstVisit":null,"BeforeLeavingThePage":true},"Recurrence":{"DisplayOnlyOneTime":false,"NbDisplaysByPeriod":1,"PeriodType":0},"DataCondition":{"AllowAnonymousInterception":true,"AllowKnownVisitorInterception":false},"ActionConfig":null,"InterceptionType":1,"EventConditions":null,"DirectFormConfig":{"idParam":70,"strParam":"/T/WF/123/fkk9Y3/Optin/fr-CA/Form.ofsys","height":450,"width":500}},"Name":"TMSM Abonnement","idInterceptor":42,"useAdvancedMode":false}]);